name: Rob么 Noturno - Atualizador de Dados 

# GATILHOS (Quando o rob么 acorda?)
on:
  schedule:
    # Cron Job: Roda todos os dias s 10:00 UTC (07:00 Brasil/Portugal Aprox)
    # Isso garante que os jogos da noite anterior j谩 acabaram.
    - cron: '0 10 * * *'
  
  # Permite rodar manualmente clicando num bot茫o (贸timo para testes)
  workflow_dispatch:

# PERMISSES (Para o rob么 poder salvar o CSV atualizado)
permissions:
  contents: write

jobs:
  update-data:
    runs-on: ubuntu-latest # A m谩quina virtual que o GitHub empresta

    steps:
      # 1. Baixa o teu c贸digo do reposit贸rio
      - name: Checkout do c贸digo
        uses: actions/checkout@v4

      # 2. Instala o Python
      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # 3. Instala as bibliotecas do requirements.txt
      - name: Instalar Depend锚ncias
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 4. Roda o teu script de atualiza莽茫o
      - name: Executar o Rob么 (Atualizador.py)
        run: python atualizador.py

      # 5. Salva as mudan莽as (Git Commit & Push)
      # S贸 faz commit se houver mudan莽as no CSV
      - name: Commit e Push das mudan莽as
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add data_times.csv
          git commit -m " Auto-update: Dados atualizados pelo Rob么 Noturno" || echo "Sem mudan莽as para comitar"
          git push
